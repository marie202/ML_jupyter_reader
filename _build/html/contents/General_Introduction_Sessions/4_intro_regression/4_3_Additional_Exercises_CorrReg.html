

<!DOCTYPE html>


<html lang="en" data-content_root="" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>5.2. Additional Exercises V - Regression &amp; Correlation &#8212; Machine Learning Online Reader</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../../../_static/styles/theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../../../_static/styles/bootstrap.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../../../_static/styles/pydata-sphinx-theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />

  
  <link href="../../../_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../../../_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../../_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../../_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/styles/sphinx-book-theme.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/design-style.1e8bd061cd6da7fc9cf755528e8ffc24.min.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b" />
<link rel="preload" as="script" href="../../../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b" />
  <script src="../../../_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=dfe6caa3a7d634c4db9b"></script>

    <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
    <script src="../../../_static/jquery.js"></script>
    <script src="../../../_static/underscore.js"></script>
    <script src="../../../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../../../_static/doctools.js"></script>
    <script src="../../../_static/clipboard.min.js"></script>
    <script src="../../../_static/copybutton.js"></script>
    <script src="../../../_static/scripts/sphinx-book-theme.js"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../../../_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../../../_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script async="async" src="../../../_static/sphinx-thebe.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'contents/General_Introduction_Sessions/4_intro_regression/4_3_Additional_Exercises_CorrReg';</script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="6. Machine learning Algorithms I" href="../../ML_algorithms/5_ML_Intro.html" />
    <link rel="prev" title="5. Correlation and Regression" href="4_2_Intro_Correlation.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../../../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="../../../intro.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../../../_static/logo.png" class="logo__image only-light" alt="Machine Learning Online Reader - Home"/>
    <script>document.write(`<img src="../../../_static/logo.png" class="logo__image only-dark" alt="Machine Learning Online Reader - Home"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../../../intro.html">
                    Machine Learning Intro Course Materials
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Introduction to Python</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="../1_Introduction_to_Python/1_0_Intro_to_Python_landing.html">1. Introduction to Python</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../1_Introduction_to_Python/1_1_Python_as_calculator.html">1.1. Using Python as calculator</a></li>

<li class="toctree-l2"><a class="reference internal" href="../1_Introduction_to_Python/1_2_Build_in_Functions.html">1.3. Use of predefined functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../1_Introduction_to_Python/1_3_data_structures.html">1.4. Data structures</a></li>
<li class="toctree-l2"><a class="reference internal" href="../1_Introduction_to_Python/1_4_atomic_datatypes.html">1.5. Datatypes</a></li>


<li class="toctree-l2"><a class="reference internal" href="../1_Introduction_to_Python/1_5_objects_data_types.html">1.8. The concept of objects in Python</a></li>
<li class="toctree-l2"><a class="reference internal" href="../1_Introduction_to_Python/1_6_Intro_user_defined_functions.html">1.9. User defined functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../1_Introduction_to_Python/1_7_control_flow_mit_Lsg.html">1.10. Steering the control flow of a program</a></li>

<li class="toctree-l2"><a class="reference internal" href="../1_Introduction_to_Python/1_8_Pandas_Dataframes.html">1.12. Pandas package for handling <code class="docutils literal notranslate"><span class="pre">DataFrames</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../1_Introduction_to_Python/1_9_Exercises_Einf_Python_I.html">1.13. Additional Exercises I</a></li>
<li class="toctree-l2"><a class="reference internal" href="../1_Introduction_to_Python/1_10_Exercises_Einf_Python_II.html">1.14. Additional Exercises II</a></li>
</ul>
</details></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Recap Statistics</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="../2_NVT/2_1_Wdhl_Statisitk_1.html">2. Recap Statistics</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../2_NVT/2_2_Add_Exercises_NVT.html">2.3. Additional Exercises III -  The Normal distribution</a></li>
</ul>
</details></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Feature Scales</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="../3_features_scales/3_Feature_scales.html">3. Feature Scales</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../3_features_scales/3_Add_Exercises_FeatureScales-v2.html">3.4. Additional Exercises IV -  Feature Scales</a></li>
</ul>
</details></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Recap Regression &amp; Correlation</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="4_1_Intro_Regression.html">4. Linear Regression</a></li>
<li class="toctree-l1 current active has-children"><a class="reference internal" href="4_2_Intro_Correlation.html">5. Correlation and Regression</a><details open="open"><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul class="current">
<li class="toctree-l2 current active"><a class="current reference internal" href="#">5.2. Additional Exercises V -  Regression &amp; Correlation</a></li>
</ul>
</details></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Machine Learning Algorithms</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../ML_algorithms/5_ML_Intro.html">6. Machine learning Algorithms I</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../ML_algorithms/5_Supervised/5_0_Supervised_ML_intro.html">7. Supervised Machine Learning</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../../ML_algorithms/5_Supervised/5_1_SVM.html">7.1. Support Vector Machines (SVM)</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../ML_algorithms/6_Unsupervised/6_0_Unsupervised_ML_intro.html">8. Supervised Machine Learning</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../../ML_algorithms/6_Unsupervised/6_1_k-Means.html">8.1. Clustering Algorithms - $k$-Means</a></li>
</ul>
</details></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://marie202.github.io/ML_jupyter_reader/_build/html" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://marie202.github.io/ML_jupyter_reader/_build/html/issues/new?title=Issue%20on%20page%20%2Fcontents/General_Introduction_Sessions/4_intro_regression/4_3_Additional_Exercises_CorrReg.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../../../_sources/contents/General_Introduction_Sessions/4_intro_regression/4_3_Additional_Exercises_CorrReg.ipynb" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm pst-navbar-icon search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Additional Exercises V -  Regression & Correlation</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#data-set-import-processsing">5.2.1. Data set Import &amp; Processsing</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#exercise-1-feature-scaling">5.2.2. Exercise 1: Feature scaling</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#min-max-scaling">5.2.2.1. Min-Max scaling</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#logistic-transformation">5.2.2.2. Logistic transformation</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#back-transformation">5.2.2.3. Back transformation</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#exercise-a">5.2.2.4. Exercise A</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#exercise-b">5.2.2.5. Exercise B</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#solution">5.2.2.6. solution</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#exercise-2-correlation-plots">5.2.3. Exercise 2: Correlation Plots</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id1">5.2.3.1. solution</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#exercise-3-correlation-coeffcicients">5.2.4. Exercise 3: Correlation Coeffcicients</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#exercise-4-recall">5.2.5. Exercise 4: Recall</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#exercise-5-correlation-coefficients-an-applied-example">5.2.6. Exercise 5: Correlation Coefficients, an Applied Example**</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#solution-7">5.2.6.1. solution 7</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#exercise-6-tree-line-regression">5.2.7. Exercise 6: Tree Line Regression</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#solution-8-a">5.2.7.1. solution 8 A</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#solution-8b">5.2.7.2. solution 8B</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#solution-additonal-8c-log">5.2.7.3. solution Additonal 8C - log</a></li>
</ul>
</li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="additional-exercises-v-regression-correlation">
<h1><span class="section-number">5.2. </span>Additional Exercises V -  Regression &amp; Correlation<a class="headerlink" href="#additional-exercises-v-regression-correlation" title="Permalink to this heading">#</a></h1>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># First, let&#39;s import all the needed libraries.</span>

<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">seaborn</span> <span class="k">as</span> <span class="nn">sns</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">statsmodels.api</span> <span class="k">as</span> <span class="nn">sm</span>
<span class="kn">from</span> <span class="nn">scipy</span> <span class="kn">import</span> <span class="n">stats</span>
<span class="kn">from</span> <span class="nn">sklearn.linear_model</span> <span class="kn">import</span> <span class="n">LinearRegression</span>

<span class="kn">import</span> <span class="nn">warnings</span>

<span class="n">warnings</span><span class="o">.</span><span class="n">filterwarnings</span><span class="p">(</span><span class="s2">&quot;ignore&quot;</span><span class="p">,</span> <span class="s2">&quot;use_inf_as_na&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<section id="data-set-import-processsing">
<h2><span class="section-number">5.2.1. </span>Data set Import &amp; Processsing<a class="headerlink" href="#data-set-import-processsing" title="Permalink to this heading">#</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">requests</span><span class="o">,</span> <span class="nn">zipfile</span><span class="o">,</span> <span class="nn">io</span>

<span class="n">url</span> <span class="o">=</span> <span class="s2">&quot;http://userpage.fu-berlin.de/soga/soga-py/300/307000_time_series/tageswerte_KL_00403_19500101_20211231_hist.zip&quot;</span>
<span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
<span class="n">z</span> <span class="o">=</span> <span class="n">zipfile</span><span class="o">.</span><span class="n">ZipFile</span><span class="p">(</span><span class="n">io</span><span class="o">.</span><span class="n">BytesIO</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">content</span><span class="p">))</span>
<span class="n">z</span><span class="o">.</span><span class="n">extract</span><span class="p">(</span><span class="s2">&quot;produkt_klima_tag_19500101_20211231_00403.txt&quot;</span><span class="p">,</span> <span class="s2">&quot;../data&quot;</span><span class="p">)</span>
<span class="n">data_raw</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span>
    <span class="s2">&quot;../data/produkt_klima_tag_19500101_20211231_00403.txt&quot;</span><span class="p">,</span>
    <span class="n">sep</span><span class="o">=</span><span class="s2">&quot;;&quot;</span><span class="p">,</span>
    <span class="n">na_values</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;-999&quot;</span><span class="p">],</span>
    <span class="n">skipinitialspace</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="p">)</span>
<span class="n">data_raw</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>STATIONS_ID</th>
      <th>MESS_DATUM</th>
      <th>QN_3</th>
      <th>FX</th>
      <th>FM</th>
      <th>QN_4</th>
      <th>RSK</th>
      <th>RSKF</th>
      <th>SDK</th>
      <th>SHK_TAG</th>
      <th>NM</th>
      <th>VPM</th>
      <th>PM</th>
      <th>TMK</th>
      <th>UPM</th>
      <th>TXK</th>
      <th>TNK</th>
      <th>TGK</th>
      <th>eor</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>403</td>
      <td>19500101</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>5</td>
      <td>2.2</td>
      <td>7</td>
      <td>NaN</td>
      <td>0.0</td>
      <td>5.0</td>
      <td>4.0</td>
      <td>1025.60</td>
      <td>-3.2</td>
      <td>83.00</td>
      <td>-1.1</td>
      <td>-4.9</td>
      <td>-6.3</td>
      <td>eor</td>
    </tr>
    <tr>
      <th>1</th>
      <td>403</td>
      <td>19500102</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>5</td>
      <td>12.6</td>
      <td>8</td>
      <td>NaN</td>
      <td>0.0</td>
      <td>8.0</td>
      <td>6.1</td>
      <td>1005.60</td>
      <td>1.0</td>
      <td>95.00</td>
      <td>2.2</td>
      <td>-3.7</td>
      <td>-5.3</td>
      <td>eor</td>
    </tr>
    <tr>
      <th>2</th>
      <td>403</td>
      <td>19500103</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>5</td>
      <td>0.5</td>
      <td>1</td>
      <td>NaN</td>
      <td>0.0</td>
      <td>5.0</td>
      <td>6.5</td>
      <td>996.60</td>
      <td>2.8</td>
      <td>86.00</td>
      <td>3.9</td>
      <td>1.7</td>
      <td>-1.4</td>
      <td>eor</td>
    </tr>
    <tr>
      <th>3</th>
      <td>403</td>
      <td>19500104</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>5</td>
      <td>0.5</td>
      <td>7</td>
      <td>NaN</td>
      <td>0.0</td>
      <td>7.7</td>
      <td>5.2</td>
      <td>999.50</td>
      <td>-0.1</td>
      <td>85.00</td>
      <td>2.1</td>
      <td>-0.9</td>
      <td>-2.3</td>
      <td>eor</td>
    </tr>
    <tr>
      <th>4</th>
      <td>403</td>
      <td>19500105</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>5</td>
      <td>10.3</td>
      <td>7</td>
      <td>NaN</td>
      <td>0.0</td>
      <td>8.0</td>
      <td>4.0</td>
      <td>1001.10</td>
      <td>-2.8</td>
      <td>79.00</td>
      <td>-0.9</td>
      <td>-3.3</td>
      <td>-5.2</td>
      <td>eor</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>26293</th>
      <td>403</td>
      <td>20211227</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>3</td>
      <td>0.0</td>
      <td>8</td>
      <td>0.183</td>
      <td>0.0</td>
      <td>5.9</td>
      <td>3.8</td>
      <td>998.13</td>
      <td>-3.7</td>
      <td>79.67</td>
      <td>-0.7</td>
      <td>-7.9</td>
      <td>-9.9</td>
      <td>eor</td>
    </tr>
    <tr>
      <th>26294</th>
      <td>403</td>
      <td>20211228</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>3</td>
      <td>1.5</td>
      <td>6</td>
      <td>0.000</td>
      <td>0.0</td>
      <td>6.4</td>
      <td>5.3</td>
      <td>990.17</td>
      <td>-0.5</td>
      <td>88.46</td>
      <td>2.7</td>
      <td>-3.9</td>
      <td>-5.1</td>
      <td>eor</td>
    </tr>
    <tr>
      <th>26295</th>
      <td>403</td>
      <td>20211229</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>3</td>
      <td>0.3</td>
      <td>6</td>
      <td>0.000</td>
      <td>0.0</td>
      <td>7.5</td>
      <td>8.2</td>
      <td>994.40</td>
      <td>4.0</td>
      <td>100.00</td>
      <td>5.6</td>
      <td>1.8</td>
      <td>0.0</td>
      <td>eor</td>
    </tr>
    <tr>
      <th>26296</th>
      <td>403</td>
      <td>20211230</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>3</td>
      <td>3.2</td>
      <td>6</td>
      <td>0.000</td>
      <td>0.0</td>
      <td>7.9</td>
      <td>11.5</td>
      <td>1001.70</td>
      <td>9.0</td>
      <td>98.54</td>
      <td>12.7</td>
      <td>4.6</td>
      <td>2.3</td>
      <td>eor</td>
    </tr>
    <tr>
      <th>26297</th>
      <td>403</td>
      <td>20211231</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>3</td>
      <td>5.5</td>
      <td>6</td>
      <td>0.000</td>
      <td>0.0</td>
      <td>7.7</td>
      <td>12.5</td>
      <td>1004.72</td>
      <td>12.8</td>
      <td>84.96</td>
      <td>14.0</td>
      <td>11.5</td>
      <td>10.7</td>
      <td>eor</td>
    </tr>
  </tbody>
</table>
<p>26298 rows × 19 columns</p>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Remove unnecessary columns</span>
<span class="c1">### By looking at the data and consulting the variable description,</span>
<span class="c1">### we can immediately find variables that are not useful for our purpose and drop them.</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">data_raw</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span>
    <span class="n">columns</span><span class="o">=</span><span class="p">[</span>
        <span class="s2">&quot;STATIONS_ID&quot;</span><span class="p">,</span>
        <span class="s2">&quot;MESS_DATUM&quot;</span><span class="p">,</span>
        <span class="s2">&quot;QN_3&quot;</span><span class="p">,</span>
        <span class="s2">&quot;FX&quot;</span><span class="p">,</span>
        <span class="s2">&quot;FM&quot;</span><span class="p">,</span>
        <span class="s2">&quot;NM&quot;</span><span class="p">,</span>
        <span class="s2">&quot;eor&quot;</span><span class="p">,</span>
        <span class="s2">&quot;QN_4&quot;</span><span class="p">,</span>
        <span class="s2">&quot;RSK&quot;</span><span class="p">,</span>
        <span class="s2">&quot;RSKF&quot;</span><span class="p">,</span>
        <span class="s2">&quot;SHK_TAG&quot;</span><span class="p">,</span>
        <span class="s2">&quot;SDK&quot;</span><span class="p">,</span>
        <span class="s2">&quot;UPM&quot;</span><span class="p">,</span>
        <span class="s2">&quot;VPM&quot;</span><span class="p">,</span>
    <span class="p">]</span>
<span class="p">)</span>
<span class="c1">## rename for convenience:</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span>
    <span class="n">columns</span><span class="o">=</span><span class="p">{</span>
        <span class="s2">&quot;PM&quot;</span><span class="p">:</span> <span class="s2">&quot;pres&quot;</span><span class="p">,</span>
        <span class="s2">&quot;TMK&quot;</span><span class="p">:</span> <span class="s2">&quot;temp&quot;</span><span class="p">,</span>
        <span class="s2">&quot;TXK&quot;</span><span class="p">:</span> <span class="s2">&quot;temp_max&quot;</span><span class="p">,</span>
        <span class="s2">&quot;TNK&quot;</span><span class="p">:</span> <span class="s2">&quot;temp_min&quot;</span><span class="p">,</span>
        <span class="s2">&quot;TGK&quot;</span><span class="p">:</span> <span class="s2">&quot;temp_sfc&quot;</span><span class="p">,</span>
    <span class="p">}</span>
<span class="p">)</span>
<span class="n">df</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>pres</th>
      <th>temp</th>
      <th>temp_max</th>
      <th>temp_min</th>
      <th>temp_sfc</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1025.60</td>
      <td>-3.2</td>
      <td>-1.1</td>
      <td>-4.9</td>
      <td>-6.3</td>
    </tr>
    <tr>
      <th>1</th>
      <td>1005.60</td>
      <td>1.0</td>
      <td>2.2</td>
      <td>-3.7</td>
      <td>-5.3</td>
    </tr>
    <tr>
      <th>2</th>
      <td>996.60</td>
      <td>2.8</td>
      <td>3.9</td>
      <td>1.7</td>
      <td>-1.4</td>
    </tr>
    <tr>
      <th>3</th>
      <td>999.50</td>
      <td>-0.1</td>
      <td>2.1</td>
      <td>-0.9</td>
      <td>-2.3</td>
    </tr>
    <tr>
      <th>4</th>
      <td>1001.10</td>
      <td>-2.8</td>
      <td>-0.9</td>
      <td>-3.3</td>
      <td>-5.2</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>26293</th>
      <td>998.13</td>
      <td>-3.7</td>
      <td>-0.7</td>
      <td>-7.9</td>
      <td>-9.9</td>
    </tr>
    <tr>
      <th>26294</th>
      <td>990.17</td>
      <td>-0.5</td>
      <td>2.7</td>
      <td>-3.9</td>
      <td>-5.1</td>
    </tr>
    <tr>
      <th>26295</th>
      <td>994.40</td>
      <td>4.0</td>
      <td>5.6</td>
      <td>1.8</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>26296</th>
      <td>1001.70</td>
      <td>9.0</td>
      <td>12.7</td>
      <td>4.6</td>
      <td>2.3</td>
    </tr>
    <tr>
      <th>26297</th>
      <td>1004.72</td>
      <td>12.8</td>
      <td>14.0</td>
      <td>11.5</td>
      <td>10.7</td>
    </tr>
  </tbody>
</table>
<p>26298 rows × 5 columns</p>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">### Drop missing data</span>
<span class="c1">## As a next step, we check the data for missing values.</span>
<span class="n">df</span><span class="o">.</span><span class="n">isnull</span><span class="p">()</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>pres        0
temp        0
temp_max    0
temp_min    0
temp_sfc    8
dtype: int64
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">dropna</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">df</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>pres</th>
      <th>temp</th>
      <th>temp_max</th>
      <th>temp_min</th>
      <th>temp_sfc</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1025.60</td>
      <td>-3.2</td>
      <td>-1.1</td>
      <td>-4.9</td>
      <td>-6.3</td>
    </tr>
    <tr>
      <th>1</th>
      <td>1005.60</td>
      <td>1.0</td>
      <td>2.2</td>
      <td>-3.7</td>
      <td>-5.3</td>
    </tr>
    <tr>
      <th>2</th>
      <td>996.60</td>
      <td>2.8</td>
      <td>3.9</td>
      <td>1.7</td>
      <td>-1.4</td>
    </tr>
    <tr>
      <th>3</th>
      <td>999.50</td>
      <td>-0.1</td>
      <td>2.1</td>
      <td>-0.9</td>
      <td>-2.3</td>
    </tr>
    <tr>
      <th>4</th>
      <td>1001.10</td>
      <td>-2.8</td>
      <td>-0.9</td>
      <td>-3.3</td>
      <td>-5.2</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>26293</th>
      <td>998.13</td>
      <td>-3.7</td>
      <td>-0.7</td>
      <td>-7.9</td>
      <td>-9.9</td>
    </tr>
    <tr>
      <th>26294</th>
      <td>990.17</td>
      <td>-0.5</td>
      <td>2.7</td>
      <td>-3.9</td>
      <td>-5.1</td>
    </tr>
    <tr>
      <th>26295</th>
      <td>994.40</td>
      <td>4.0</td>
      <td>5.6</td>
      <td>1.8</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>26296</th>
      <td>1001.70</td>
      <td>9.0</td>
      <td>12.7</td>
      <td>4.6</td>
      <td>2.3</td>
    </tr>
    <tr>
      <th>26297</th>
      <td>1004.72</td>
      <td>12.8</td>
      <td>14.0</td>
      <td>11.5</td>
      <td>10.7</td>
    </tr>
  </tbody>
</table>
<p>26290 rows × 5 columns</p>
</div></div></div>
</div>
</section>
<section id="exercise-1-feature-scaling">
<h2><span class="section-number">5.2.2. </span>Exercise 1: Feature scaling<a class="headerlink" href="#exercise-1-feature-scaling" title="Permalink to this heading">#</a></h2>
<p>In the next steps it is exaplained how to transform the data to make the different variables (feature) comparable with each other <strong>min-max scaling</strong> and <strong>logistic transformation</strong> which transforms e.g. skew-symmetric data to a normally distributed data set.
We comment the code, because our data is normally distributed. But you need it later for dealing with different data.</p>
<section id="min-max-scaling">
<h3><span class="section-number">5.2.2.1. </span>Min-Max scaling<a class="headerlink" href="#min-max-scaling" title="Permalink to this heading">#</a></h3>
<p>The min-max scaling</p>
<p>$$x’=\frac{x-x_{min}}{x_{max}-x_{min}}$$</p>
<p>transforms the data into the range $[0,1]$. We want to avoid getting values with 0, because in the second step we need the logarithm of the values. Therefore, we use slightly larger boundary values $x_{min}-1$ and $x_{max}+1$. Thus</p>
<p>$$x’=\frac{x-x_{min}+1}{x_{max}-x_{min}+2, .}$$</p>
</section>
<section id="logistic-transformation">
<h3><span class="section-number">5.2.2.2. </span>Logistic transformation<a class="headerlink" href="#logistic-transformation" title="Permalink to this heading">#</a></h3>
<p>As a second step, we use a logistic transformation
$$x’’=\log\frac{x’}{1-x’}$$</p>
<p>However, before we can start the transformation, we face a problem! Because we have transformed the test set with the values of the training set, the test set may contain values outside the range [0,1]. This will not work with the logarithm in the transformation.</p>
</section>
<section id="back-transformation">
<h3><span class="section-number">5.2.2.3. </span>Back transformation<a class="headerlink" href="#back-transformation" title="Permalink to this heading">#</a></h3>
<p>The back transformation is the “logistic” function resp. inverse logit:</p>
<p>\begin{align}
x’’\to x’=\frac{e^{x’’}}{1+e^{x’’}}&amp;&amp; and &amp;&amp;
x’\to x=(x’+l)\cdot(u-l)
\end{align}</p>
<p>\begin{align}
&amp;&amp; resp. &amp;&amp;
x’\to x= ({x’+x_{min}+1})\cdot(x_{max}-x_{min}+2)
\end{align}</p>
</section>
<section id="exercise-a">
<h3><span class="section-number">5.2.2.4. </span>Exercise A<a class="headerlink" href="#exercise-a" title="Permalink to this heading">#</a></h3>
<blockquote>
<div><p>Write function (<code class="docutils literal notranslate"><span class="pre">def</span> <span class="pre">():...</span></code>) that log transforms your data including a prior Min-Max-Scaling. This way we can generalise our approach well to new unseen data! (e.g. call it <code class="docutils literal notranslate"><span class="pre">logistic_min_max()</span></code> function).</p>
</div></blockquote>
</section>
<section id="exercise-b">
<h3><span class="section-number">5.2.2.5. </span>Exercise B<a class="headerlink" href="#exercise-b" title="Permalink to this heading">#</a></h3>
<blockquote>
<div><p>The same way provide a function that back transformations this “logistic” function, resp. inverse logit! (call it <code class="docutils literal notranslate"><span class="pre">inv_logit()</span></code> function)</p>
</div></blockquote>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">### your code here ###</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="solution">
<h3><span class="section-number">5.2.2.6. </span>solution<a class="headerlink" href="#solution" title="Permalink to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">## A.</span>


<span class="k">def</span> <span class="nf">min_max</span><span class="p">(</span><span class="n">variable</span><span class="p">):</span>
    <span class="n">xmin</span><span class="p">,</span> <span class="n">xmax</span> <span class="o">=</span> <span class="n">variable</span><span class="o">.</span><span class="n">min</span><span class="p">(),</span> <span class="n">variable</span><span class="o">.</span><span class="n">max</span><span class="p">()</span>
    <span class="n">min_max_done</span> <span class="o">=</span> <span class="p">(</span><span class="n">variable</span> <span class="o">-</span> <span class="n">xmin</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">xmax</span> <span class="o">-</span> <span class="n">xmin</span> <span class="o">+</span> <span class="mi">2</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">xmin</span><span class="p">,</span> <span class="n">xmax</span><span class="p">,</span> <span class="n">min_max_done</span>


<span class="c1"># df_transfo[transform_cols] = (df_transfo[transform_cols] - xmin + 1) / (xmax - xmin + 2)</span>

<span class="n">test</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">xmin</span><span class="p">,</span> <span class="n">xmax</span><span class="p">,</span> <span class="n">min_max_variable</span> <span class="o">=</span> <span class="n">min_max</span><span class="p">(</span><span class="n">test</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">log_transform</span><span class="p">(</span><span class="n">min_max_variable</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">min_max_variable</span> <span class="o">/</span> <span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="n">min_max_variable</span><span class="p">))</span>


<span class="n">log_transform</span><span class="p">(</span><span class="n">min_max_variable</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([-4.60517019, -3.90197267, -3.48635519, -3.18841662, -2.95491028,
       -2.76211742, -2.59738463, -2.45315795, -2.324564  , -2.20827441,
       -2.1019144 , -2.00372972, -1.91238746, -1.82685079, -1.7462971 ,
       -1.67006253, -1.59760345, -1.52846885, -1.46228027, -1.39871688,
       -1.3375042 , -1.2784054 , -1.22121461, -1.16575159, -1.11185752,
       -1.05939158, -1.00822823, -0.95825493, -0.90937029, -0.8614825 ,
       -0.81450804, -0.7683706 , -0.72300014, -0.67833209, -0.63430668,
       -0.59086833, -0.54796517, -0.50554857, -0.46357274, -0.42199441,
       -0.3807725 , -0.33986783, -0.29924289, -0.25886163, -0.2186892 ,
       -0.17869179, -0.13883644, -0.0990909 , -0.05942342, -0.01980263,
        0.01980263,  0.05942342,  0.0990909 ,  0.13883644,  0.17869179,
        0.2186892 ,  0.25886163,  0.29924289,  0.33986783,  0.3807725 ,
        0.42199441,  0.46357274,  0.50554857,  0.54796517,  0.59086833,
        0.63430668,  0.67833209,  0.72300014,  0.7683706 ,  0.81450804,
        0.8614825 ,  0.90937029,  0.95825493,  1.00822823,  1.05939158,
        1.11185752,  1.16575159,  1.22121461,  1.2784054 ,  1.3375042 ,
        1.39871688,  1.46228027,  1.52846885,  1.59760345,  1.67006253,
        1.7462971 ,  1.82685079,  1.91238746,  2.00372972,  2.1019144 ,
        2.20827441,  2.324564  ,  2.45315795,  2.59738463,  2.76211742,
        2.95491028,  3.18841662,  3.48635519,  3.90197267,  4.60517019])
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">## B.</span>


<span class="c1"># backtransform</span>
<span class="c1">## reverse min max und perform exp()</span>
<span class="k">def</span> <span class="nf">inv_logit</span><span class="p">(</span><span class="n">xmin</span><span class="p">,</span> <span class="n">xmax</span><span class="p">,</span> <span class="n">logit_transf_variable</span><span class="p">):</span>
    <span class="k">return</span> <span class="p">(</span><span class="n">xmin</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">+</span> <span class="p">(</span><span class="n">xmax</span> <span class="o">-</span> <span class="n">xmin</span> <span class="o">+</span> <span class="mi">2</span><span class="p">)</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="n">logit_transf_variable</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span>
        <span class="mi">1</span> <span class="o">+</span> <span class="n">np</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="n">logit_transf_variable</span><span class="p">)</span>
    <span class="p">)</span>


<span class="n">inv_logit</span><span class="p">(</span><span class="n">xmin</span><span class="p">,</span> <span class="n">xmax</span><span class="p">,</span> <span class="n">log_transform</span><span class="p">(</span><span class="n">min_max_variable</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([4.4408921e-16, 1.0000000e+00, 2.0000000e+00, 3.0000000e+00,
       4.0000000e+00, 5.0000000e+00, 6.0000000e+00, 7.0000000e+00,
       8.0000000e+00, 9.0000000e+00, 1.0000000e+01, 1.1000000e+01,
       1.2000000e+01, 1.3000000e+01, 1.4000000e+01, 1.5000000e+01,
       1.6000000e+01, 1.7000000e+01, 1.8000000e+01, 1.9000000e+01,
       2.0000000e+01, 2.1000000e+01, 2.2000000e+01, 2.3000000e+01,
       2.4000000e+01, 2.5000000e+01, 2.6000000e+01, 2.7000000e+01,
       2.8000000e+01, 2.9000000e+01, 3.0000000e+01, 3.1000000e+01,
       3.2000000e+01, 3.3000000e+01, 3.4000000e+01, 3.5000000e+01,
       3.6000000e+01, 3.7000000e+01, 3.8000000e+01, 3.9000000e+01,
       4.0000000e+01, 4.1000000e+01, 4.2000000e+01, 4.3000000e+01,
       4.4000000e+01, 4.5000000e+01, 4.6000000e+01, 4.7000000e+01,
       4.8000000e+01, 4.9000000e+01, 5.0000000e+01, 5.1000000e+01,
       5.2000000e+01, 5.3000000e+01, 5.4000000e+01, 5.5000000e+01,
       5.6000000e+01, 5.7000000e+01, 5.8000000e+01, 5.9000000e+01,
       6.0000000e+01, 6.1000000e+01, 6.2000000e+01, 6.3000000e+01,
       6.4000000e+01, 6.5000000e+01, 6.6000000e+01, 6.7000000e+01,
       6.8000000e+01, 6.9000000e+01, 7.0000000e+01, 7.1000000e+01,
       7.2000000e+01, 7.3000000e+01, 7.4000000e+01, 7.5000000e+01,
       7.6000000e+01, 7.7000000e+01, 7.8000000e+01, 7.9000000e+01,
       8.0000000e+01, 8.1000000e+01, 8.2000000e+01, 8.3000000e+01,
       8.4000000e+01, 8.5000000e+01, 8.6000000e+01, 8.7000000e+01,
       8.8000000e+01, 8.9000000e+01, 9.0000000e+01, 9.1000000e+01,
       9.2000000e+01, 9.3000000e+01, 9.4000000e+01, 9.5000000e+01,
       9.6000000e+01, 9.7000000e+01, 9.8000000e+01, 9.9000000e+01])
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">### log tranform your variable</span>

<span class="n">df_transfo</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<span class="n">transform_cols</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s2">&quot;temp&quot;</span><span class="p">,</span>
    <span class="s2">&quot;temp_max&quot;</span><span class="p">,</span>
    <span class="s2">&quot;temp_min&quot;</span><span class="p">,</span>
    <span class="s2">&quot;temp_sfc&quot;</span><span class="p">,</span>
<span class="p">]</span>  <span class="c1"># [&quot;COLUMN NAME&quot;, &quot;COLUMN NAME&quot;]</span>

<span class="n">xmin</span><span class="p">,</span> <span class="n">xmax</span><span class="p">,</span> <span class="n">df_transfo</span><span class="p">[</span><span class="n">transform_cols</span><span class="p">]</span> <span class="o">=</span> <span class="n">min_max</span><span class="p">(</span><span class="n">df_transfo</span><span class="p">[</span><span class="n">transform_cols</span><span class="p">])</span>

<span class="n">df_transfo</span><span class="p">[</span><span class="n">transform_cols</span><span class="p">]</span> <span class="o">=</span> <span class="n">log_transform</span><span class="p">(</span><span class="n">df_transfo</span><span class="p">[</span><span class="n">transform_cols</span><span class="p">])</span>

<span class="c1">## calculate mean &amp; median tranform back:</span>
<span class="n">inv_logit</span><span class="p">(</span><span class="n">xmin</span><span class="p">,</span> <span class="n">xmax</span><span class="p">,</span> <span class="n">df_transfo</span><span class="p">[</span><span class="n">transform_cols</span><span class="p">]</span><span class="o">.</span><span class="n">mean</span><span class="p">()),</span> <span class="n">inv_logit</span><span class="p">(</span>
    <span class="n">xmin</span><span class="p">,</span> <span class="n">xmax</span><span class="p">,</span> <span class="n">df_transfo</span><span class="p">[</span><span class="n">transform_cols</span><span class="p">]</span><span class="o">.</span><span class="n">median</span><span class="p">()</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(temp         9.767871
 temp_max    13.886515
 temp_min     5.842247
 temp_sfc     4.349503
 dtype: float64,
 temp         9.5
 temp_max    13.6
 temp_min     5.5
 temp_sfc     3.7
 dtype: float64)
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># do each column by hand ....</span>
<span class="n">stats</span><span class="o">.</span><span class="n">pearsonr</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s2">&quot;temp_min&quot;</span><span class="p">],</span> <span class="n">df</span><span class="p">[</span><span class="s2">&quot;temp_max&quot;</span><span class="p">])</span>

<span class="c1"># or easily use the .corr() function of the entire df:</span>

<span class="n">df</span><span class="o">.</span><span class="n">corr</span><span class="p">(</span><span class="n">method</span><span class="o">=</span><span class="s2">&quot;pearson&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>pres</th>
      <th>temp</th>
      <th>temp_max</th>
      <th>temp_min</th>
      <th>temp_sfc</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>pres</th>
      <td>1.000000</td>
      <td>-0.069212</td>
      <td>-0.042117</td>
      <td>-0.123350</td>
      <td>-0.125634</td>
    </tr>
    <tr>
      <th>temp</th>
      <td>-0.069212</td>
      <td>1.000000</td>
      <td>0.981847</td>
      <td>0.952269</td>
      <td>0.902622</td>
    </tr>
    <tr>
      <th>temp_max</th>
      <td>-0.042117</td>
      <td>0.981847</td>
      <td>1.000000</td>
      <td>0.908394</td>
      <td>0.852836</td>
    </tr>
    <tr>
      <th>temp_min</th>
      <td>-0.123350</td>
      <td>0.952269</td>
      <td>0.908394</td>
      <td>1.000000</td>
      <td>0.975749</td>
    </tr>
    <tr>
      <th>temp_sfc</th>
      <td>-0.125634</td>
      <td>0.902622</td>
      <td>0.852836</td>
      <td>0.975749</td>
      <td>1.000000</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
</section>
</section>
<section id="exercise-2-correlation-plots">
<h2><span class="section-number">5.2.3. </span>Exercise 2: Correlation Plots<a class="headerlink" href="#exercise-2-correlation-plots" title="Permalink to this heading">#</a></h2>
<p>Create a correlation plot for the original data (df) and one for the transformed data (df_transfo). Both should be displayed in one figure but 1 subplot each.  Are there differences between the two plots? Which variables are no longer or more strongly correlated? How can these differences be explained?</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">### your code here ###</span>
</pre></div>
</div>
</div>
</div>
<section id="id1">
<h3><span class="section-number">5.2.3.1. </span>solution<a class="headerlink" href="#id1" title="Permalink to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">corr</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>pres</th>
      <th>temp</th>
      <th>temp_max</th>
      <th>temp_min</th>
      <th>temp_sfc</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>pres</th>
      <td>1.000000</td>
      <td>-0.069212</td>
      <td>-0.042117</td>
      <td>-0.123350</td>
      <td>-0.125634</td>
    </tr>
    <tr>
      <th>temp</th>
      <td>-0.069212</td>
      <td>1.000000</td>
      <td>0.981847</td>
      <td>0.952269</td>
      <td>0.902622</td>
    </tr>
    <tr>
      <th>temp_max</th>
      <td>-0.042117</td>
      <td>0.981847</td>
      <td>1.000000</td>
      <td>0.908394</td>
      <td>0.852836</td>
    </tr>
    <tr>
      <th>temp_min</th>
      <td>-0.123350</td>
      <td>0.952269</td>
      <td>0.908394</td>
      <td>1.000000</td>
      <td>0.975749</td>
    </tr>
    <tr>
      <th>temp_sfc</th>
      <td>-0.125634</td>
      <td>0.902622</td>
      <td>0.852836</td>
      <td>0.975749</td>
      <td>1.000000</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df_transfo</span><span class="o">.</span><span class="n">corr</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>pres</th>
      <th>temp</th>
      <th>temp_max</th>
      <th>temp_min</th>
      <th>temp_sfc</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>pres</th>
      <td>1.000000</td>
      <td>-0.066808</td>
      <td>-0.042975</td>
      <td>-0.118797</td>
      <td>-0.116435</td>
    </tr>
    <tr>
      <th>temp</th>
      <td>-0.066808</td>
      <td>1.000000</td>
      <td>0.980614</td>
      <td>0.945663</td>
      <td>0.891206</td>
    </tr>
    <tr>
      <th>temp_max</th>
      <td>-0.042975</td>
      <td>0.980614</td>
      <td>1.000000</td>
      <td>0.901528</td>
      <td>0.842826</td>
    </tr>
    <tr>
      <th>temp_min</th>
      <td>-0.118797</td>
      <td>0.945663</td>
      <td>0.901528</td>
      <td>1.000000</td>
      <td>0.972604</td>
    </tr>
    <tr>
      <th>temp_sfc</th>
      <td>-0.116435</td>
      <td>0.891206</td>
      <td>0.842826</td>
      <td>0.972604</td>
      <td>1.000000</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">5</span><span class="p">))</span>


<span class="n">sns</span><span class="o">.</span><span class="n">heatmap</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">corr</span><span class="p">(),</span> <span class="n">annot</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">fmt</span><span class="o">=</span><span class="s2">&quot;.2f&quot;</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="n">sns</span><span class="o">.</span><span class="n">heatmap</span><span class="p">(</span><span class="n">df_transfo</span><span class="o">.</span><span class="n">corr</span><span class="p">(),</span> <span class="n">annot</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">fmt</span><span class="o">=</span><span class="s2">&quot;.2f&quot;</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>

<span class="n">ax</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s2">&quot;original data&quot;</span><span class="p">)</span>
<span class="n">ax</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s2">&quot;log-transformed data&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../../../_images/f584cb8dfb79b365c8dabddc604ff7e81539246c34dcb6b385714b52d04947d1.png" src="../../../_images/f584cb8dfb79b365c8dabddc604ff7e81539246c34dcb6b385714b52d04947d1.png" />
</div>
</div>
</section>
</section>
<section id="exercise-3-correlation-coeffcicients">
<h2><span class="section-number">5.2.4. </span>Exercise 3: Correlation Coeffcicients<a class="headerlink" href="#exercise-3-correlation-coeffcicients" title="Permalink to this heading">#</a></h2>
<blockquote>
<div><p>Calculate the correlation coefficient matrix of the original, not-transformed mateorological data set using the Spearman-rank-coefficient.</p>
</div></blockquote>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">### your code here ###</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="exercise-4-recall">
<h2><span class="section-number">5.2.5. </span>Exercise 4: Recall<a class="headerlink" href="#exercise-4-recall" title="Permalink to this heading">#</a></h2>
<blockquote>
<div><ol class="arabic simple">
<li><p>How are the Pearson correlation coefficient and the Spearman rank correlation coefficient defined?</p></li>
<li><p>Both corrrelations have values between -1 and 1. In which case is the coefficient negative?</p></li>
<li><p>Sketch an example (by hand), where the Pearson Correlation Coefficient is larger than the Spearman rank correlation!</p></li>
</ol>
</div></blockquote>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">### your code here ###</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="exercise-5-correlation-coefficients-an-applied-example">
<h2><span class="section-number">5.2.6. </span>Exercise 5: Correlation Coefficients, an Applied Example**<a class="headerlink" href="#exercise-5-correlation-coefficients-an-applied-example" title="Permalink to this heading">#</a></h2>
<blockquote>
<div><p>In a catchment area in southern Brandenburg, the discharge (Q), electrical conductivity (LF) and the concentrations of various chemical substances such as sulphate (SO4), calcium (CA) and magnesium (MG) were measured at a groundwater monitoring site on various days.  It is known that brown coal was once mined in the area and that the pyrite (iron disulphide, FeS2) contained in the soil is exposed to atmospheric oxygen and oxidises. This can result in considerable amounts of acid, iron (Fe3+) and sulphate, which endanger drinking water quality. There is also agricultural land in the area. Various fertilisers containing sulphur compounds with phosphorus (PO43-) or nitrate (NO3) can also pollute the groundwater here with sulphate.</p>
<p><strong>Interpret the correlation matrix from the point of view of groundwater protection!  Decide whether the groundwater is polluted by former brown coal mining or by agriculture.</strong></p>
</div></blockquote>
<div class="pst-scrollable-table-container"><table class="colwidths-auto table">
<thead>
<tr class="row-odd"><th class="head"><p></p></th>
<th class="head"><p>Q</p></th>
<th class="head"><p>LF</p></th>
<th class="head"><p>NO3</p></th>
<th class="head"><p>SO4</p></th>
<th class="head"><p>Ca</p></th>
<th class="head"><p>Mg</p></th>
<th class="head"><p>PO4 2-</p></th>
<th class="head"><p>Fe3+</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Q</p></td>
<td><p>1</p></td>
<td><p></p></td>
<td><p></p></td>
<td><p></p></td>
<td><p></p></td>
<td><p></p></td>
<td><p></p></td>
<td><p></p></td>
</tr>
<tr class="row-odd"><td><p>LF</p></td>
<td><p>-0,87</p></td>
<td><p>1</p></td>
<td><p></p></td>
<td><p></p></td>
<td><p></p></td>
<td><p></p></td>
<td><p></p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p>NO3</p></td>
<td><p>0,61</p></td>
<td><p>-0,84</p></td>
<td><p>1</p></td>
<td><p></p></td>
<td><p></p></td>
<td><p></p></td>
<td><p></p></td>
<td><p></p></td>
</tr>
<tr class="row-odd"><td><p>SO4</p></td>
<td><p>-0,74</p></td>
<td><p>0,88</p></td>
<td><p>-0,36</p></td>
<td><p>1</p></td>
<td><p></p></td>
<td><p></p></td>
<td><p></p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p>Ca</p></td>
<td><p>-0,56</p></td>
<td><p>0,73</p></td>
<td><p>-0,67</p></td>
<td><p>0,69</p></td>
<td><p>1</p></td>
<td><p></p></td>
<td><p></p></td>
<td><p></p></td>
</tr>
<tr class="row-odd"><td><p>Mg</p></td>
<td><p>-0,44</p></td>
<td><p>0,7</p></td>
<td><p>-0,62</p></td>
<td><p>0,62</p></td>
<td><p>0,38</p></td>
<td><p>1</p></td>
<td><p></p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p>PO4 2-</p></td>
<td><p>-0,7</p></td>
<td><p>0,81</p></td>
<td><p>0,86</p></td>
<td><p>0,31</p></td>
<td><p>0,76</p></td>
<td><p>0,71</p></td>
<td><p>1</p></td>
<td><p></p></td>
</tr>
<tr class="row-odd"><td><p>Fe3+</p></td>
<td><p>-0,65</p></td>
<td><p>0,77</p></td>
<td><p>-0,76</p></td>
<td><p>0,84</p></td>
<td><p>0,71</p></td>
<td><p>0,7</p></td>
<td><p>-0,81</p></td>
<td><p>1</p></td>
</tr>
</tbody>
</table>
</div>
<p><em>(inspired by Möller 2002)</em></p>
<section id="solution-7">
<h3><span class="section-number">5.2.6.1. </span>solution 7<a class="headerlink" href="#solution-7" title="Permalink to this heading">#</a></h3>
<div class="pst-scrollable-table-container"><table class="colwidths-auto table">
<thead>
<tr class="row-odd"><th class="head"><p></p></th>
<th class="head"><p>Q</p></th>
<th class="head"><p>LF</p></th>
<th class="head"><p>NO3</p></th>
<th class="head"><p>SO4</p></th>
<th class="head"><p>Ca</p></th>
<th class="head"><p>Mg</p></th>
<th class="head"><p>PO4 2-</p></th>
<th class="head"><p>Fe3+</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Q</p></td>
<td><p>1</p></td>
<td><p></p></td>
<td><p></p></td>
<td><p></p></td>
<td><p></p></td>
<td><p></p></td>
<td><p></p></td>
<td><p></p></td>
</tr>
<tr class="row-odd"><td><p>LF</p></td>
<td><p>-0,87</p></td>
<td><p>1</p></td>
<td><p></p></td>
<td><p></p></td>
<td><p></p></td>
<td><p></p></td>
<td><p></p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p>NO3</p></td>
<td><p>0,61</p></td>
<td><p>-0,84</p></td>
<td><p>1</p></td>
<td><p></p></td>
<td><p></p></td>
<td><p></p></td>
<td><p></p></td>
<td><p></p></td>
</tr>
<tr class="row-odd"><td><p>SO4</p></td>
<td><p>-0,74</p></td>
<td><p>0,88</p></td>
<td><p><strong>-0,36</strong></p></td>
<td><p>1</p></td>
<td><p></p></td>
<td><p></p></td>
<td><p></p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p>Ca</p></td>
<td><p>-0,56</p></td>
<td><p>0,73</p></td>
<td><p>-0,67</p></td>
<td><p>0,69</p></td>
<td><p>1</p></td>
<td><p></p></td>
<td><p></p></td>
<td><p></p></td>
</tr>
<tr class="row-odd"><td><p>Mg</p></td>
<td><p>-0,44</p></td>
<td><p>0,7</p></td>
<td><p>-0,62</p></td>
<td><p>0,62</p></td>
<td><p>0,38</p></td>
<td><p>1</p></td>
<td><p></p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p>PO4 2-</p></td>
<td><p>-0,7</p></td>
<td><p>0,81</p></td>
<td><p>0,86</p></td>
<td><p><strong>0,31</strong></p></td>
<td><p>0,76</p></td>
<td><p>0,71</p></td>
<td><p>1</p></td>
<td><p></p></td>
</tr>
<tr class="row-odd"><td><p>Fe3+</p></td>
<td><p>-0,65</p></td>
<td><p>0,77</p></td>
<td><p>-0,76</p></td>
<td><p><strong>0,84</strong></p></td>
<td><p>0,71</p></td>
<td><p>0,7</p></td>
<td><p>-0,81</p></td>
<td><p>1</p></td>
</tr>
</tbody>
</table>
</div>
<blockquote>
<div><p>former brown coal mining (Fe3+, SO4 2-) or agriculture (PO43-, NO3, SO4 2-) ?
correlation between Fe3+ and SO4 highest –&gt; so presumably the flow paths run through former brown coal mining areas or are influenced by them.</p>
</div></blockquote>
</section>
</section>
<section id="exercise-6-tree-line-regression">
<h2><span class="section-number">5.2.7. </span>Exercise 6: Tree Line Regression<a class="headerlink" href="#exercise-6-tree-line-regression" title="Permalink to this heading">#</a></h2>
<blockquote>
<div><p>Where is the tree line (Baumgrenze) in the Alps, for example? Let’s take a look at this, admittedly somewhat artificial, data set. We have collected annual precipitation data at 7 different climate stations and now want to determine the relationship between precipitation (mm/a) and the tree line. For the majority of native tree species, an annual precipitation of 400 mm is required.</p>
<p><strong>A</strong>: Plot elevation against precipitation and calculate the correlation coefficient according to spearman and pearson. Do they differ? Which is more suitable here and why?</p>
<p><strong>B</strong>: Which linear regression model is the best estimate for our data? Create a linear model with sklearn LinearRegression and evaluate it (R2). At what height are no more trees to be expected? Is a Linear regression suitbale here ? What could be an easy solution to better predict our data and build a better model?</p>
<p>Additonal <strong>C</strong>: Build the same model again but apply a log-transformation to our data. Can you improve R2? Can we make a better prediction?</p>
</div></blockquote>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">elev_NN</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">300</span><span class="p">,</span> <span class="mi">500</span><span class="p">,</span> <span class="mi">840</span><span class="p">,</span> <span class="mi">1160</span><span class="p">,</span> <span class="mi">1830</span><span class="p">,</span> <span class="mi">2100</span><span class="p">,</span> <span class="mi">2400</span><span class="p">])</span>  <span class="c1"># m a. s.l.</span>
<span class="n">precip</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1800</span><span class="p">,</span> <span class="mi">1250</span><span class="p">,</span> <span class="mi">700</span><span class="p">,</span> <span class="mi">510</span><span class="p">,</span> <span class="mi">410</span><span class="p">,</span> <span class="mi">310</span><span class="p">,</span> <span class="mi">230</span><span class="p">])</span>  <span class="c1"># mm/a</span>
</pre></div>
</div>
</div>
</div>
<section id="solution-8-a">
<h3><span class="section-number">5.2.7.1. </span>solution 8 A<a class="headerlink" href="#solution-8-a" title="Permalink to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">elev_NN</span><span class="p">,</span> <span class="n">precip</span><span class="p">)</span>

<span class="n">corr</span> <span class="o">=</span> <span class="n">stats</span><span class="o">.</span><span class="n">spearmanr</span><span class="p">(</span><span class="n">elev_NN</span><span class="p">,</span> <span class="n">precip</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="n">corr</span><span class="p">)</span>
<span class="n">corr</span> <span class="o">=</span> <span class="n">stats</span><span class="o">.</span><span class="n">pearsonr</span><span class="p">(</span><span class="n">elev_NN</span><span class="p">,</span> <span class="n">precip</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="n">corr</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>-1.0
-0.88453400089943
</pre></div>
</div>
<img alt="../../../_images/7018b4a3347229050cb1266b8ceab906d139f2da3f3fa2aee1a9f1a16834ac0b.png" src="../../../_images/7018b4a3347229050cb1266b8ceab906d139f2da3f3fa2aee1a9f1a16834ac0b.png" />
</div>
</div>
</section>
<section id="solution-8b">
<h3><span class="section-number">5.2.7.2. </span>solution 8B<a class="headerlink" href="#solution-8b" title="Permalink to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">x</span> <span class="o">=</span> <span class="n">elev_NN</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">precip</span>

<span class="c1"># we have to reshape the regressors</span>
<span class="n">x</span> <span class="o">=</span> <span class="n">x</span><span class="o">.</span><span class="n">reshape</span><span class="p">((</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>

<span class="c1"># set up the linear model</span>
<span class="n">model</span> <span class="o">=</span> <span class="n">LinearRegression</span><span class="p">()</span>

<span class="c1"># find the linear function that fits the min/max temperature best:</span>
<span class="n">model</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>

<span class="c1">## Now, we can easily plot using the 2 coefficients: m*x +n --&gt;</span>
<span class="n">plt</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">coef_</span> <span class="o">*</span> <span class="n">x</span> <span class="o">+</span> <span class="n">model</span><span class="o">.</span><span class="n">intercept_</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">&quot;red&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[&lt;matplotlib.lines.Line2D at 0x14e2506a0&gt;]
</pre></div>
</div>
<img alt="../../../_images/e87ca49c5dee64256e8f10fd977a5afbb5de2e67eb7c9b7f6a8ad038b2ac2824.png" src="../../../_images/e87ca49c5dee64256e8f10fd977a5afbb5de2e67eb7c9b7f6a8ad038b2ac2824.png" />
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">## predict from y to x--&gt; input is precip</span>

<span class="c1">## transform the input with min max and log as well</span>
<span class="n">sample</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">400</span><span class="p">])</span>


<span class="c1"># max temp:</span>
<span class="n">x_pred</span> <span class="o">=</span> <span class="p">(</span><span class="n">sample</span> <span class="o">-</span> <span class="n">model</span><span class="o">.</span><span class="n">intercept_</span><span class="p">)</span> <span class="o">/</span> <span class="n">model</span><span class="o">.</span><span class="n">coef_</span>

<span class="nb">print</span><span class="p">(</span><span class="n">x_pred</span><span class="p">)</span>

<span class="c1"># inv_logit(logit_transf_variable = x_pred, xmin = elev_min, xmax = elev_max)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[1855.98180986]
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">### predict from x to y</span>
<span class="n">baumgrenze</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">0</span><span class="p">])</span>
<span class="n">baumgrenze</span> <span class="o">=</span> <span class="n">baumgrenze</span><span class="o">.</span><span class="n">reshape</span><span class="p">((</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>

<span class="n">y_pred</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">baumgrenze</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">y_pred</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[1558.2246607]
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">### evaluate</span>

<span class="n">r_sq</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">score</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;coefficient of determination:&quot;</span><span class="p">,</span> <span class="n">r_sq</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>coefficient of determination: 0.7824003987471526
</pre></div>
</div>
</div>
</div>
</section>
<section id="solution-additonal-8c-log">
<h3><span class="section-number">5.2.7.3. </span>solution Additonal 8C - log<a class="headerlink" href="#solution-additonal-8c-log" title="Permalink to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">## extent the min-max function</span>

<span class="c1">## A.</span>


<span class="k">def</span> <span class="nf">min_max</span><span class="p">(</span><span class="n">variable</span><span class="p">,</span> <span class="n">xmin</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">xmax</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">xmin</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">xmax</span> <span class="o">==</span> <span class="kc">None</span><span class="p">):</span>  <span class="c1">## no we are able to set xmin manually</span>
        <span class="n">xmax</span> <span class="o">=</span> <span class="n">variable</span><span class="o">.</span><span class="n">max</span><span class="p">()</span>
        <span class="n">min_max_done</span> <span class="o">=</span> <span class="p">(</span><span class="n">variable</span> <span class="o">-</span> <span class="n">xmin</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">xmax</span> <span class="o">-</span> <span class="n">xmin</span> <span class="o">+</span> <span class="mi">2</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">xmin</span><span class="p">,</span> <span class="n">xmax</span><span class="p">,</span> <span class="n">min_max_done</span>
    <span class="k">elif</span> <span class="p">(</span><span class="n">xmin</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span>
        <span class="n">xmax</span> <span class="o">!=</span> <span class="kc">None</span>
    <span class="p">):</span>  <span class="c1">## no we are able to set xmin and xmax manually</span>
        <span class="n">min_max_done</span> <span class="o">=</span> <span class="p">(</span><span class="n">variable</span> <span class="o">-</span> <span class="n">xmin</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">xmax</span> <span class="o">-</span> <span class="n">xmin</span> <span class="o">+</span> <span class="mi">2</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">xmin</span><span class="p">,</span> <span class="n">xmax</span><span class="p">,</span> <span class="n">min_max_done</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">xmin</span><span class="p">,</span> <span class="n">xmax</span> <span class="o">=</span> <span class="n">variable</span><span class="o">.</span><span class="n">min</span><span class="p">(),</span> <span class="n">variable</span><span class="o">.</span><span class="n">max</span><span class="p">()</span>
        <span class="n">min_max_done</span> <span class="o">=</span> <span class="p">(</span><span class="n">variable</span> <span class="o">-</span> <span class="n">xmin</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">xmax</span> <span class="o">-</span> <span class="n">xmin</span> <span class="o">+</span> <span class="mi">2</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">xmin</span><span class="p">,</span> <span class="n">xmax</span><span class="p">,</span> <span class="n">min_max_done</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">## logtransfrom</span>

<span class="n">elev_min</span><span class="p">,</span> <span class="n">elev_max</span><span class="p">,</span> <span class="n">elev_min_max</span> <span class="o">=</span> <span class="n">min_max</span><span class="p">(</span><span class="n">elev_NN</span><span class="p">)</span>
<span class="n">elev_log</span> <span class="o">=</span> <span class="n">log_transform</span><span class="p">(</span><span class="n">elev_min_max</span><span class="p">)</span>

<span class="n">precip_min</span><span class="p">,</span> <span class="n">precip_max</span><span class="p">,</span> <span class="n">precip_min_max</span> <span class="o">=</span> <span class="n">min_max</span><span class="p">(</span><span class="n">precip</span><span class="p">)</span>
<span class="n">precip_log</span> <span class="o">=</span> <span class="n">log_transform</span><span class="p">(</span><span class="n">precip_min_max</span><span class="p">)</span>

<span class="c1"># elev_min, precip_min = 0</span>

<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">elev_log</span><span class="p">,</span> <span class="n">precip_log</span><span class="p">)</span>

<span class="n">x</span> <span class="o">=</span> <span class="n">elev_log</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">precip_log</span>

<span class="c1"># we have to reshape the regressors</span>
<span class="n">x</span> <span class="o">=</span> <span class="n">x</span><span class="o">.</span><span class="n">reshape</span><span class="p">((</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>

<span class="c1"># set up the linear model</span>
<span class="n">model</span> <span class="o">=</span> <span class="n">LinearRegression</span><span class="p">()</span>

<span class="c1"># find the linear function that fits the min/max temperature best:</span>
<span class="n">model</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>

<span class="c1">## Now, we can easily plot using the 2 coefficients: m*x +n --&gt;</span>
<span class="n">plt</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">coef_</span> <span class="o">*</span> <span class="n">x</span> <span class="o">+</span> <span class="n">model</span><span class="o">.</span><span class="n">intercept_</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">&quot;red&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[&lt;matplotlib.lines.Line2D at 0x14e3093a0&gt;]
</pre></div>
</div>
<img alt="../../../_images/062d1d0b06ee32da35c061f9495003ff925ed0eda5bbb7e3bea34f006c144f49.png" src="../../../_images/062d1d0b06ee32da35c061f9495003ff925ed0eda5bbb7e3bea34f006c144f49.png" />
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">### evaluate</span>

<span class="n">r_sq</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">score</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;coefficient of determination:&quot;</span><span class="p">,</span> <span class="n">r_sq</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>coefficient of determination: 0.9678937802675692
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">## predict x from y --&gt; input is precip</span>

<span class="c1">## transform the input with min max and log as well</span>
<span class="n">sample</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">400</span><span class="p">])</span>
<span class="n">_</span><span class="p">,</span> <span class="n">_</span><span class="p">,</span> <span class="n">sample_min_max</span> <span class="o">=</span> <span class="n">min_max</span><span class="p">(</span><span class="n">sample</span><span class="p">,</span> <span class="n">xmin</span><span class="o">=</span><span class="n">precip_min</span><span class="p">,</span> <span class="n">xmax</span><span class="o">=</span><span class="n">precip_max</span><span class="p">)</span>
<span class="n">sample_log</span> <span class="o">=</span> <span class="n">log_transform</span><span class="p">(</span><span class="n">sample_min_max</span><span class="p">)</span>


<span class="c1"># max temp:</span>
<span class="n">x_pred</span> <span class="o">=</span> <span class="p">(</span><span class="n">sample_log</span> <span class="o">-</span> <span class="n">model</span><span class="o">.</span><span class="n">intercept_</span><span class="p">)</span> <span class="o">/</span> <span class="n">model</span><span class="o">.</span><span class="n">coef_</span>

<span class="nb">print</span><span class="p">(</span><span class="n">x_pred</span><span class="p">)</span>

<span class="n">inv_logit</span><span class="p">(</span><span class="n">logit_transf_variable</span><span class="o">=</span><span class="n">x_pred</span><span class="p">,</span> <span class="n">xmin</span><span class="o">=</span><span class="n">elev_min</span><span class="p">,</span> <span class="n">xmax</span><span class="o">=</span><span class="n">elev_max</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[1.0812614]
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([1868.63196235])
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">## predict y from x --&gt; input is elev</span>

<span class="n">sample</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1800</span><span class="p">])</span>  <span class="c1">#</span>
<span class="n">_</span><span class="p">,</span> <span class="n">_</span><span class="p">,</span> <span class="n">sample_min_max</span> <span class="o">=</span> <span class="n">min_max</span><span class="p">(</span><span class="n">sample</span><span class="p">,</span> <span class="n">xmin</span><span class="o">=</span><span class="n">elev_min</span><span class="p">,</span> <span class="n">xmax</span><span class="o">=</span><span class="n">elev_max</span><span class="p">)</span>
<span class="n">sample_log</span> <span class="o">=</span> <span class="n">log_transform</span><span class="p">(</span><span class="n">sample_min_max</span><span class="p">)</span>


<span class="c1"># max temp:</span>
<span class="n">y_pred</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">intercept_</span> <span class="o">+</span> <span class="n">model</span><span class="o">.</span><span class="n">coef_</span> <span class="o">*</span> <span class="n">sample_log</span>
<span class="nb">print</span><span class="p">(</span><span class="n">y_pred</span><span class="p">)</span>

<span class="n">inv_logit</span><span class="p">(</span><span class="n">logit_transf_variable</span><span class="o">=</span><span class="n">y_pred</span><span class="p">,</span> <span class="n">xmin</span><span class="o">=</span><span class="n">precip_min</span><span class="p">,</span> <span class="n">xmax</span><span class="o">=</span><span class="n">precip_max</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[-1.94616697]
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([425.45584633])
</pre></div>
</div>
</div>
</div>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<div class="output text_html">
        <iframe
            width="900"
            height="200"
            src="../../citations/citation_Marie.html"
            frameborder="0"
            allowfullscreen
            
        ></iframe>
        </div></div>
</div>
</section>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./contents/General_Introduction_Sessions/4_intro_regression"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="4_2_Intro_Correlation.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title"><span class="section-number">5. </span>Correlation and Regression</p>
      </div>
    </a>
    <a class="right-next"
       href="../../ML_algorithms/5_ML_Intro.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title"><span class="section-number">6. </span>Machine learning Algorithms I</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#data-set-import-processsing">5.2.1. Data set Import &amp; Processsing</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#exercise-1-feature-scaling">5.2.2. Exercise 1: Feature scaling</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#min-max-scaling">5.2.2.1. Min-Max scaling</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#logistic-transformation">5.2.2.2. Logistic transformation</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#back-transformation">5.2.2.3. Back transformation</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#exercise-a">5.2.2.4. Exercise A</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#exercise-b">5.2.2.5. Exercise B</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#solution">5.2.2.6. solution</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#exercise-2-correlation-plots">5.2.3. Exercise 2: Correlation Plots</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id1">5.2.3.1. solution</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#exercise-3-correlation-coeffcicients">5.2.4. Exercise 3: Correlation Coeffcicients</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#exercise-4-recall">5.2.5. Exercise 4: Recall</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#exercise-5-correlation-coefficients-an-applied-example">5.2.6. Exercise 5: Correlation Coefficients, an Applied Example**</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#solution-7">5.2.6.1. solution 7</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#exercise-6-tree-line-regression">5.2.7. Exercise 6: Tree Line Regression</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#solution-8-a">5.2.7.1. solution 8 A</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#solution-8b">5.2.7.2. solution 8B</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#solution-additonal-8c-log">5.2.7.3. solution Additonal 8C - log</a></li>
</ul>
</li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Annette Rudolph, Marie-Christin Eckert
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2023.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../../../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b"></script>
<script src="../../../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>